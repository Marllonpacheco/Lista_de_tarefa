GET

async function getData() {
  try {
    const response = await axios.get(
      "/api/todos"
    );
    setTodos(response.data);
  } catch (err) {
    console.error("Error fetching data:", err);
  }
}

                  {todos.map((todo) => (
                    <TableRow key={todo.id}>
                      <TableCell className="rounded-l-md font-medium">{todo.id}</TableCell>
                      <TableCell className="truncate max-w-[40ch]">{todo.title}</TableCell>
                      <TableCell>
                        {todo.completed ? (
                          <span className="text-green-600 font-medium">Concluída</span>
                        ) : (
                          <span className="text-yellow-600 font-medium">Pendente</span>
                        )}
                      </TableCell>
                      <TableCell className="rounded-r-md">
                        <div className="flex gap-2">
                          <Button
                            variant="outline"
                            size="icon"
                            className="border border-muted-foreground/50"
                            onClick={() => (
                              setShowEditar(true),
                              setSelectedTodo(todo)
                            )}
                          >
                            <Pencil />
                          </Button>
                          <Button
                            variant="destructive"
                            size="icon"
                            onClick={() => (
                              setShowExcluir(true),
                              setSelectedTodo(todo)
                            )}
                          >
                            <TrashIcon />
                          </Button>
                        </div>
                      </TableCell>
                    </TableRow>
                  ))}


POST

async function postData(formData: FormValues) {
  try {
    console.log('Enviando dados:', formData);
    
    const response = await axios.post('/api/todos', {
        title: formData.title,
        completed: formData.status
    });

    console.log('Resposta da API:', response.data);
    toast.success('Tarefa criada com sucesso!');
    form.reset();
    onOpenChange?.(false);
    onSuccess?.(response.data);
  } catch (error) {
    console.error('Erro completo:', error);
    toast.error('Erro ao criar a tarefa. Tente novamente.');
  }
}


PUT

async function putData(formData: FormValues) {
  try {
    console.log('Atualizando tarefa:', { id, ...formData });

    const response = await axios.put(`/api/todos/${id}`, {
        id: id,
        title: formData.title,
        completed: formData.status
    });

    console.log('Resposta da API (PUT):', response.data);
    toast.success('Tarefa atualizada com sucesso!');
    form.reset();
    onOpenChange?.(false);
    onSuccess?.(response.data);
  } catch (error) {
    console.error('Erro ao atualizar a tarefa:', error);
    toast.error('Erro ao atualizar a tarefa.');
  }
}

DELETE

async function deleteData() {
  try {
    console.log('Excluindo tarefa:', id);

    const response = await axios.delete(`/api/todos/${id}`);

    console.log('Resposta da API (DELETE):', response.status);
    toast.success("Tarefa excluída com sucesso!");
    onOpenChange?.(false);
    onSuccess?.(id);
  } catch (error) {
    console.error('Erro ao excluir a tarefa:', error);
    toast.error('Erro ao excluir a tarefa.');
  }
}